{
  "swagger": "2.0",
  "info": {
    "description": "Model Control Interface server instance.",
    "version": "1.0.0",
    "title": "Model Control Interface",
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/license/mit"
    }
  },
  "host": "petstore.swagger.io",
  "basePath": "/v2",
  "tags": [
    {
      "name": "process",
      "description": "An executable unit"
    }
  ],
  "schemes": ["http", "https"],
  "paths": {
    "/processes": {
      "post": {
        "tags": ["process"],
        "summary": "Create a process",
        "description": "Instantiate a new executable process",
        "operationId": "createProcess",
        "consumes": ["application/json"],
        "produces": ["application/json"],
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "Process object to be instantiated",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Process"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Process created successfully",
            "schema": {
              "$ref": "#/definitions/Process"
            }
          },
          "400": {
            "description": "Invalid input (e.g., missing required fields)"
          },
          "405": {
            "description": "Invalid input"
          }
        },
        "security": [
          {
            "mci_auth": ["write:processes", "read:processes"]
          }
        ]
      }
    },
    "/processes/{pid}": {
      "parameters": [
        {
          "name": "pid",
          "in": "path",
          "required": true,
          "type": "integer",
          "description": "The ID of the process to act upon"
        }
      ],
      "put": {
        "tags": ["process"],
        "summary": "Modify an existing process",
        "description": "Updates a process. Note: This will fail with a 409 if the process is currently 'running'.",
        "operationId": "updateProcess",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": { "$ref": "#/definitions/Process" }
          }
        ],
        "responses": {
          "200": { "description": "Process updated successfully" },
          "404": { "description": "Process not found" },
          "409": { "description": "Conflict: Cannot modify a running process" }
        }
      },
      "delete": {
        "tags": ["process"],
        "summary": "Delete a process",
        "description": "Removes a process from the server. Note: Running processes cannot be deleted.",
        "operationId": "deleteProcess",
        "responses": {
          "204": { "description": "Process deleted successfully" },
          "404": { "description": "Process not found" },
          "409": { "description": "Conflict: Cannot delete a running process" }
        }
      }
    },
    "/processes/{pid}/signal": {
      "post": {
        "tags": ["process"],
        "summary": "Send a signal to a process",
        "description": "Signals a process to change its execution state. Valid signals: kill, pause, restart.",
        "parameters": [
          {
            "name": "pid",
            "in": "path",
            "required": true,
            "type": "integer"
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["signal"],
              "properties": {
                "signal": {
                  "type": "string",
                  "enum": ["kill", "pause", "restart"]
                }
              }
            }
          }
        ],
        "responses": {
          "200": { "description": "Signal accepted and applied" },
          "409": { "description": "Conflict: Signal not applicable to current process state" }
        }
      }
    },
    "/processes/{pid}/start": {
      "post": {
        "tags": ["process"],
        "summary": "Start an idle process",
        "description": "Triggers execution for a saved/idle process.",
        "parameters": [
          {
            "name": "pid",
            "in": "path",
            "required": true,
            "type": "integer"
          }
        ],
        "responses": {
          "200": { "description": "Process started successfully" },
          "400": { "description": "Process is already running or completed" }
        }
      }
    }
  },
  "securityDefinitions": {
    "mci_auth": {
      "type": "oauth2",
      "flow": "implicit",
      "authorizationUrl": "http://petstore.swagger.io/oauth/dialog",
      "scopes": {
        "write:processes": "modify processes in your account",
        "read:processes": "read your processes"
      }
    }
  },
"definitions": {
  "Process": {
    "type": "object",
    "required": [
      "code",
      "action"
    ],
    "properties": {
      "pid": {
        "type": "integer",
        "format": "int64",
        "description": "Server-generated incremental process ID.",
        "readOnly": true,
        "example": 101
      },
      "name": {
        "type": "string",
        "description": "Client-defined name or auto-generated by server if omitted.",
        "example": "DataSync_Task"
      },
      "description": {
        "type": "string",
        "description": "Optional details about the process.",
        "example": "Nightly sync of user data."
      },
      "status": {
        "type": "string",
        "readOnly": true,
        "enum": ["idle", "running", "error", "completed"],
        "description": "The current execution state of the process."
      },
      "code": {
        "type": "string",
        "description": "The logic/code to be executed.",
        "example": "print('hello world')"
      },
      "action": {
        "type": "string",
        "enum": [
          "run",
          "save",
          "save_on_run",
          "save_and_run"
        ]
      },
      "environment": {
        "type": "string",
        "description": "Optional environment setting.",
        "example": "production"
      },
      "extras": {
        "type": "object",
        "description": "Key-value pairs for additional metadata.",
        "additionalProperties": {
          "type": "string"
        },
        "example": {
          "priority": "high",
          "retries": "3"
        }
      }
    }
  }
}
